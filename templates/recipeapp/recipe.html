{% extends "inner-page.html" %}

{% load static %}
{% block content %}

<style>
    #green1{
            color:green
    }
    #red1{
            color:red
    }
    #green2{
            color:green
    }
    #red2{
            color:yellow
    }
</style>
    <!-- ======= Breadcrumbs Section ======= -->
    <section class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Recipe Page</h2>
          <ol>
            <li><a href="{% url 'main' %}">Home</a></li>
            <li>Recipe Page</li>
          </ol>
        </div>

      </div>
    </section><!-- End Breadcrumbs Section -->

    <script>
         $(document).ready(function(){

            // ì–˜ë¥¼ í´ë¦­í–ˆì„ ë•Œ
            $('a[name="fav_add"]').click(function(){
                //ë ˆì‹œí”¼ ì•„ì´ë””
                 r_id = $(this).find('p');
                // ì¦ì°¾ì¶”ê°€
                $.ajax({
                   url:{% url 'fav_add' %},
                   data:{'r_id':r_id},
                   type:'get',
                   success:function(data){
                        alert(data);
                        if(data.trim() == 'ok'){
                          $('span[name="fav_add"]').text('ğŸ’—');
                        }else{};
                   }
                });
            });


             // ì–˜ë¥¼ í´ë¦­í–ˆì„ ë•Œ
            $('a[name="fav_cancel"]').click(function(){
                //ë ˆì‹œí”¼ ì•„ì´ë””
                 r_id = $(this).find('p');
                // ì¦ì°¾ì·¨ì†Œ
                $.ajax({
                   url:{% url 'fav_cancel' %},
                   data:{'r_id':r_id},
                   type:'get',
                   success:function(data){
                        alert(data);
                        if(data.trim() == '1'){
                            $('span[name="fav_cancel"]').text('ğŸ¤');
                        }else{};


                   }
                });
            });


        });
    </script>

<!--============================ë‚´ê°€ ê°€ì§„ ì‹ì¬ë£Œ==================================================-->

<!-- ì´ ë¶€ë¶„ì€ í˜„ì¬ ë¡œê·¸ì¸ë˜ì–´ ìˆëŠ” ì‚¬ìš©ì í•œëª…ì— ëŒ€í•´ì„œë§Œ ì¶œë ¥ë˜ì–´ì•¼ í•˜ë¯€ë¡œ forë¬¸ ì•ˆì— ë„£ìœ¼ë©´ ì•ˆë¨-->
<!--ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ê°€ì§€ê³  ìˆëŠ” ì‹ì¬ë£Œë¥¼ select ë¬¸ìœ¼ë¡œ ê°€ì ¸ì™€ì„œ ì¶œë ¥í•´ì£¼ì–´ì•¼ í•œë‹¤.-->
<!--( select * from users_ingr where u_id=(í˜„ì¬ë¡œê·¸ì¸í•œì‚¬ìš©ìì˜ì•„ì´ë””) )-->
    <!-- ======= Menu Section ======= -->
    <section id="menu" class="menu">
      <div class="container">


<!--  ë§Œì•½ ì„¸ì…˜ì˜ snickname ë¼ëŠ” keyì— valueê°€ ì¡´ì¬í•˜ë©´, ì¦‰, ë¡œê·¸ì¸ì´ ë˜ì–´ìˆìœ¼ë©´-->
<!--  ë¡œê·¸ì¸ì´ ë˜ì–´ìˆëŠ” ê²½ìš°ì—ë§Œ ì„¸ì…˜ì— ê°’ë“¤ì´ ì €ì¥ë˜ì–´ìˆê²Œ í•´ë†“ì•˜ìŒ -->
      {% if request.session.snickname %}
        <div class="section-title">
<!--      request.session.snickname : í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ë‹‰ë„¤ì„-->
          <h2>{{request.session.snickname}}ë‹˜ì´ ê°€ì§„ <span>ì‹ì¬ë£Œ ê³ ë¥´ê¸°</span></h2>
        </div>
<!--  ë§Œì•½ ì„¸ì…˜ì˜ snickname ë¼ëŠ” keyì— valueê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, ì¦‰, ë¡œê·¸ì¸ì´ ë˜ì–´ìˆì§€ ì•Šìœ¼ë©´-->
      {% else %}
        <div class="section-title">
            <h2><span>ì‹ì¬ë£Œ ê³ ë¥´ê¸°</span></h2>
        </div>
      {% endif %}

<!--    ë²„íŠ¼ ì¶œë ¥í•˜ëŠ” ì˜ì—­, ë°˜ë³µë  í•„ìš” ì—†ìŒ-->
        <div class="row">
          <div class="col-lg-12 d-flex justify-content-center">
            <ul id="menu-flters">
              <li data-filter="*" class="filter-active">Show All</li>
              <li data-filter=".filter-close">Close</li>
            </ul>
          </div>
        </div>




      <form action="{% url 'filtering' %}" method="post">
        {% csrf_token %}
        <div class="row menu-container">
    <!--    ì´ ë¶€ë¶„ì´ ì‹ì¬ë£Œ í‘œì‹œí•˜ëŠ” ë¶€ë¶„(ì²´í¬ë°•ìŠ¤ë‘ ì‹ì¬ë£Œ ë¦¬ìŠ¤íŠ¸ í‘œì‹œë˜ëŠ” ë¶€ë¶„) ì´ë¯€ë¡œ ì—¬ê¸°ë§Œ forë¬¸ì„ ëŒë ¤ì¤€ë‹¤-->
            <br><br><br><br>
            <br><br><br><br>
            {% for ui in ingredients %}
              <div class="col-lg-4 menu-item filter-active">
                <div class="menu-content">
                  <a>

                  {% if ingr_name_user %}
                    {% if ui.i_name in ingr_name_user %}
                         <input type='checkbox' checked="checked" name='ingrcheck[]' value={{ui.i_id}}>{{ui.i_name}}
                    {% else %}
                         <input type='checkbox'  name='ingrcheck[]' value={{ui.i_id}}>{{ui.i_name}}
                    {% endif %}
                  {% else %}
                        <input type='checkbox'  name='ingrcheck[]' value={{ui.i_id}}>{{ui.i_name}}
                  {% endif %}
                  </a>
    <!--              ì²´í¬ë°•ìŠ¤ ì²´í¬ëœê±°:<input type='checkbox' name='ì„œë²„ì—ì„œ ì¸ì‹í•  ê°’' value='ì„œë²„ì— ì „ì†¡í•  ê°’' checked/>  -->
                </div>
                <div class="menu-ingredients">
                    {{ui.icp_name}} > {{ui.ic_name}}
                </div>
              </div>
            {% endfor %}
        </div>
        <nav class="nav-menu d-none d-lg-block" >
              <ul>
                <li class="book-a-table text-center"><button style="margin:40px 0px 0px 481px;border:white; outline:0;" type="submit">ë ˆì‹œí”¼ ì¶”ì²œë°›ê¸°</button></li>
              </ul>
        </nav>
      </form>

      </div>
    </section><!-- End Menu Section -->

<!--==================================ë ˆì‹œí”¼ ëª©ë¡=====================================================-->
    <!-- ======= Gallery Section ======= -->
    <section id="gallery" class="gallery">
      <div class="container-fluid">

        <div class="section-title">
          <h2>ë ˆì‹œí”¼ <span>ëª©ë¡</span></h2>
          <p>Recipe list</p>
        </div>
<<<<<<< Updated upstream
=======

>>>>>>> Stashed changes
        <div class="row no-gutters">

<!--    ë”± ì´ ë¶€ë¶„ë§Œ forë¬¸ ëŒë ¤ì„œ í•œê°œì˜ ì˜ì—­ ì•ˆì— í•œê°œì˜ ë ˆì‹œí”¼ì— ëŒ€í•œ ì •ë³´ê°€ ì¶œë ¥ë˜ê²Œë” í•´ì•¼ë¨ -->
        {% for r in recipes %}
          <div class="col-lg-3 col-md-4">
            <div class="gallery-item">
<!--            ì›ë˜ ì´ë ‡ê²Œ ë˜ì–´ìˆë˜ ì½”ë“œë¥¼-->
<!--            <a href="assets/img/gallery/gallery-1.jpg" class="venobox" data-gall="gallery-item">-->
<!--            ì´ë ‡ê²Œ ë°”ê¿”ì¤˜ì„œ ìŒì‹ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ìŒì‹ì˜ detail í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ê²Œë” í•´ë†“ìŒ(ì•„ì§ì€ ì—ëŸ¬ë‚¨)-->
                <a href="{% url 'recipe_detail' %}?r_id={{ r.r_id }}">
<!--                <h1>ì´ë¯¸ì§€{{r.r_image1}}</h1>-->
<!--             ì´ ë¶€ë¶„ì— ì›ë˜ ë“¤ì–´ê°€ ìˆë˜ ê¸°ë³¸ì‚¬ì§„ ëŒ€ì‹  ë ˆì‹œí”¼ í…Œì´ë¸”ì˜ r_image1 ê°’ì„ ê°€ì ¸ì™€ì„œ static/img í´ë” ì•ˆì— ìˆëŠ” ê°™ì€ ì´ë¦„ì˜ ì‚¬ì§„ íŒŒì¼ì„ ì¶œë ¥í•˜ë„ë¡ í•´ë†“ì€ ë¶€ë¶„-->
                <div style="height:258px"><img src="static/img/{{r.r_mimage}}" alt="" class="img-fluid"></div>
                <br></br>
                </a>




                {% if r.r_id in favorite %}
                    <a href="" name='fav_cancel' style="margin:0px 0px -4px 0px; font-size:21px; ">ğŸ’—<p style="display:none;">{{r.r_id}}</p></a href="">
                {% else %}
                    <a href="" name='fav_add' style="margin:0px 0px -4px 0px; font-size:21px; ">ğŸ¤<p style="display:none;">{{r.r_id}}</p></a>
                {% endif %}









                    <a href="{% url 'recipe_detail' %}?r_id={{ r.r_id }}"><span style="margin:30px 0px 0px 0px; font-size:21px; color:#000000;">{{r.r_name}} </span></a>
                    <br>

                {% if r.r_num == 10.0 %}
                    <img src="static/img/star5.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 9.0 %}
                    <img src="static/img/star4.5.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 8.0 %}
                    <img src="static/img/star4.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 7.0 %}
                    <img src="static/img/star3.5.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 6.0 %}
                    <img src="static/img/star3.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 5.0 %}
                    <img src="static/img/star2.5.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 4.0 %}
                    <img src="static/img/star2.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 3.0 %}
                    <img src="static/img/star1.5.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 2.0 %}
                    <img src="static/img/star1.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% elif r.r_num > 1.0 %}
                    <img src="static/img/star0.5.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% else %}
                    <img src="static/img/star0.5.jpg"><span style="font-size:15px; margin:0px 0px -4px 10px; color:#5f5950;">({{r.re_count}})</span>
                {% endif %}


                <p style="margin:4px 0px 0px 0px; font-size:17px; color:#5f5950;">ì‘ì„±ì : {{r.u_id}}</p>
                <p style="font-size:17px; margin:-1px 0px 10px 0px; color:#5f5950;">ì¡°íšŒìˆ˜ : {{r.r_view}} ì¶”ì²œìˆ˜ : {{r.r_recommend}}</p>

            </div>
          </div>
        {% endfor %}

        </div>

      </div>
    </section><!-- End Gallery Section -->


{% endblock %}

